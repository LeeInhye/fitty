<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="employeeMapper">

	<select id="selectNextEmpNo" resultType="string">
		SELECT LAST_NUMBER FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'SEQ_EMP_NO'
	</select>
	
	<insert id="insertEmployee">
		insert into tb_emp
		    (
		     emp_no
		   , emp_name
		   , emp_grade
		   , emp_gender
		   , emp_mail
		   , emp_phone
		   , emp_birth
		   , emp_status
		   , emp_photo
		   , emp_enroll_date
		   , emp_modify_date
		    )
		values
		    ( #{gradeString} || seq_emp_no.nextval
		   , #{empName}
		   , #{empGrade}
		   , #{empGender}
		   , lower(#{gradeString})|| seq_emp_no.CURRVAL || '@fitty.com'
		   , #{empPhone}
		   , #{empBirth}
		   , 'Y'
		   , #{empPhoto}
		   , sysdate
		   , sysdate
		     )
	</insert>
	
</mapper>
